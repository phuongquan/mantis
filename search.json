[{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"data-format","dir":"Articles","previous_headings":"","what":"Data format","title":"mantis","text":"data frame containing time series long format, following columns (though actual column names can different): one “timepoint” (date) column used x-axes. currently must daily granularity, values consecutive. one “item” (character) column containing categorical values identifying distinct time series. one “value” (numeric) column containing time series values used y-axes. Optionally, “tab” (character) column containing categorical values used group time series different tabs report. Example: example_prescription_numbers dataset provided package, contains (synthetic) examples aggregate numbers antibiotic prescriptions given hospital period year. contains 4 columns: PrescriptionDate - date prescriptions written Antibiotic - name antibiotic prescribed NumberOfPrescriptions - number prescriptions written antibiotic day Location - hospital site prescription written TODO: Columns can can’t contain NA values","code":"# first, attach the package if you haven't already library(mantis)  # this example data frame contains numbers of antibiotic prescriptions in long format,  #   plus a column for grouping the output: data(\"example_prescription_numbers\")  head(example_prescription_numbers) #> # A tibble: 6 × 4 #>   PrescriptionDate Antibiotic    NumberOfPrescriptions Location #>   <date>           <chr>                         <dbl> <chr>    #> 1 2022-01-01       Coamoxiclav                      45 SITE1    #> 2 2022-01-01       Gentamicin                       44 SITE1    #> 3 2022-01-01       Ceftriaxone                      26 SITE1    #> 4 2022-01-01       Metronidazole                    22 SITE1    #> 5 2022-01-01       Meropenem                         5 SITE1    #> 6 2022-01-01       Vancomycin                        0 SITE1"},{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"generating-a-report","dir":"Articles","previous_headings":"","what":"Generating a report","title":"mantis","text":"simplest way create report use mantis_report() function. need decide save report, optionally specify filename (excluding file extension). filename can contain alphanumeric, - _ characters. filename supplied, one automatically generated. can also optionally specify short description dataset, appear report. inputspec parameter specifies columns supplied data frame contain timepoint (x-axis), item (time series identifer), value (y-axis) time series. tab column specified, items sharing tab value grouped together separate tabs report. 3 different options visualising time series. set using outputspec parameter.","code":""},{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"interactive-plots","dir":"Articles","previous_headings":"Generating a report","what":"Interactive plots","title":"mantis","text":"default visualisation, produces table one time series row, orderable filterable columns showing name time series, maximum value, bar plot adjustable axes tooltips showing individual dates values. options adjusting output, changing column labels, plot type, whether use y-axis scale across table. can done using outputspec_interactive() function supplying outputspec parameter. Example: example_prescription_numbers dataset , save report current directory, separate tabs hospital site, changing first column header “Antibiotic”.","code":"mantis_report(   df = example_prescription_numbers,   inputspec = inputspec(     timepoint_col = \"PrescriptionDate\",     item_col = \"Antibiotic\",     value_col = \"NumberOfPrescriptions\",     tab_col = \"Location\"   ),   outputspec = outputspec_interactive(     item_label = \"Antibiotic\",     sync_axis_range = FALSE   ),   report_title = \"mantis report\",   dataset_description = \"Antibiotic prescriptions by site\",   save_filename = \"example_prescription_numbers_interactive\",   show_progress = TRUE )"},{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"static-plots","dir":"Articles","previous_headings":"Generating a report","what":"Static plots","title":"mantis","text":"Alternatively, report can output static plots. can useful interactivity needed, file sizes need kept small. currently two types static visualisations: heatmap multipanel, selected using outputspec_static_heatmap() outputspec_static_multipanel() function supplying outputspec parameter.","code":""},{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"heatmap","dir":"Articles","previous_headings":"Generating a report > Static plots","what":"Heatmap","title":"mantis","text":"","code":"mantis_report(   df = example_prescription_numbers,   inputspec = inputspec(     timepoint_col = \"PrescriptionDate\",     item_col = \"Antibiotic\",     value_col = \"NumberOfPrescriptions\",     tab_col = \"Location\"   ),   outputspec = outputspec_static_heatmap(     y_label = \"Antibiotic\"   ),   report_title = \"mantis report\",   dataset_description = \"Antibiotic prescriptions by site\",   save_filename = \"example_prescription_numbers_heatmap\",   show_progress = TRUE )"},{"path":"https://phuongquan.github.io/mantis/articles/mantis.html","id":"multipanel","dir":"Articles","previous_headings":"Generating a report > Static plots","what":"Multipanel","title":"mantis","text":"","code":"mantis_report(   df = example_prescription_numbers,   inputspec = inputspec(     timepoint_col = \"PrescriptionDate\",     item_col = \"Antibiotic\",     value_col = \"NumberOfPrescriptions\",     tab_col = \"Location\"   ),   outputspec = outputspec_static_multipanel(     y_label = \"Antibiotic\"   ),   report_title = \"mantis report\",   dataset_description = \"Antibiotic prescriptions by site\",   save_filename = \"example_prescription_numbers_multipanel\",   show_progress = TRUE )"},{"path":"https://phuongquan.github.io/mantis/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"T. Phuong Quan. Author, maintainer. University Oxford. Copyright holder. National Institute Health Research (NIHR). Funder.","code":""},{"path":"https://phuongquan.github.io/mantis/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Quan TP (2024). mantis: Multiple Time Series Scanner. R package version 0.1.1.9002, https://phuongquan.github.io/mantis/, https://github.com/phuongquan/mantis.","code":"@Manual{,   title = {mantis: Multiple Time Series Scanner},   author = {T. Phuong Quan},   year = {2024},   note = {R package version 0.1.1.9002,     https://phuongquan.github.io/mantis/},   url = {https://github.com/phuongquan/mantis}, }"},{"path":"https://phuongquan.github.io/mantis/index.html","id":"mantis","dir":"","previous_headings":"","what":"Multiple Time Series Scanner","title":"Multiple Time Series Scanner","text":"mantis package generates interactive html reports enable quick visual review multiple related time series. can help identification temporal artefacts unexpected trends. group time series displayed together, adjustable axes tooltips showing individual dates values. data frame containing time series long format, .e.: one “timepoint” (date) column used x-axes. currently must daily granularity, values consecutive. one “item” (character) column containing categorical values identifying distinct time series. one “value” (numeric) column containing time series values used y-axes. Optionally, “tab” (character) column containing categorical values used group time series different tabs report. inputspec parameter maps data frame columns . reports shareable can contribute forming transparent record entire analysis process. designed electronic health records mind, can used types time series.","code":""},{"path":"https://phuongquan.github.io/mantis/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Multiple Time Series Scanner","text":"","code":"# install direct from source # install.packages(\"remotes\") remotes::install_github(\"phuongquan/mantis\")"},{"path":"https://phuongquan.github.io/mantis/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Multiple Time Series Scanner","text":"","code":"library(mantis)  # this example data frame contains numbers of antibiotic prescriptions in long format,  #   plus a column for grouping the output: data(\"example_prescription_numbers\")  head(example_prescription_numbers) ## # A tibble: 6 × 4 ##   PrescriptionDate Antibiotic    NumberOfPrescriptions Location ##   <date>           <chr>                         <dbl> <chr>    ## 1 2022-01-01       Coamoxiclav                      45 SITE1    ## 2 2022-01-01       Gentamicin                       44 SITE1    ## 3 2022-01-01       Ceftriaxone                      26 SITE1    ## 4 2022-01-01       Metronidazole                    22 SITE1    ## 5 2022-01-01       Meropenem                         5 SITE1    ## 6 2022-01-01       Vancomycin                        0 SITE1 # create a report in the current directory mantis_report(   df = example_prescription_numbers,   inputspec = inputspec(     timepoint_col = \"PrescriptionDate\",     item_col = \"Antibiotic\",     value_col = \"NumberOfPrescriptions\",     tab_col = \"Location\"   ) )"},{"path":"https://phuongquan.github.io/mantis/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Multiple Time Series Scanner","text":"work supported National Institute Health Research Health Protection Research Unit (NIHR HPRU) Healthcare Associated Infections Antimicrobial Resistance University Oxford partnership Public Health England (PHE) (NIHR200915), NIHR Oxford Biomedical Research Centre.","code":""},{"path":"https://phuongquan.github.io/mantis/index.html","id":"contributing-to-this-package","dir":"","previous_headings":"","what":"Contributing to this package","title":"Multiple Time Series Scanner","text":"Please report bugs suggestions opening github issue.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_above.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for values greater than a specific value — alert_above","title":"Test for values greater than a specific value — alert_above","text":"Configure rule test time series presence values greater specific value. Tolerance can adjusted using `extent_type` `extent_value` parameters, see Examples details.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_above.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for values greater than a specific value — alert_above","text":"","code":"alert_above(extent_type = \"all\", extent_value = 1, rule_value, items = \"[ALL]\")"},{"path":"https://phuongquan.github.io/mantis/reference/alert_above.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for values greater than a specific value — alert_above","text":"extent_type \"\", \"\", \"last\", \"consecutive\" extent_value lower limit extent. e.g. `extent_type=\"\"` `extent_value=5` means alert 5 values satisfy condition, position rule_value value test . e.g. `rule_value=1` means alert value greater 1 items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_above.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for values greater than a specific value — alert_above","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_above.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for values greater than a specific value — alert_above","text":"","code":"# alert if all values are greater than 50 ars <- alert_rules(alert_below(extent_type = \"all\", rule_value = 50))  # alert if there are 10 or more values that are greater than 50 # or if the last 3 or more values are greater than 60 # or if 5 or more values in a row are greater than 40 ars <- alert_rules(   alert_below(extent_type = \"any\", extent_value = 10, rule_value = 50),   alert_below(extent_type = \"last\", extent_value = 3, rule_value = 60),   alert_below(extent_type = \"consecutive\", extent_value = 5, rule_value = 40) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_below.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for values less than a specific value — alert_below","title":"Test for values less than a specific value — alert_below","text":"Configure rule test time series presence values less specific value. Tolerance can adjusted using `extent_type` `extent_value` parameters, see Examples details.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_below.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for values less than a specific value — alert_below","text":"","code":"alert_below(extent_type = \"all\", extent_value = 1, rule_value, items = \"[ALL]\")"},{"path":"https://phuongquan.github.io/mantis/reference/alert_below.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for values less than a specific value — alert_below","text":"extent_type \"\", \"\", \"last\", \"consecutive\" extent_value lower limit extent. e.g. `extent_type=\"\"` `extent_value=5` means alert 5 values satisfy condition, position rule_value value test . e.g. `rule_value=1` means alert value less 1 items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_below.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for values less than a specific value — alert_below","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_below.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for values less than a specific value — alert_below","text":"","code":"# alert if all values are less than 2 ars <- alert_rules(alert_below(extent_type = \"all\", rule_value = 2))  # alert if there are 10 or more values that are less than 7 # or if the last 3 or more values are less than 2 # or if 5 or more values in a row are less than 7 ars <- alert_rules(   alert_below(extent_type = \"any\", extent_value = 10, rule_value = 7),   alert_below(extent_type = \"last\", extent_value = 3, rule_value = 2),   alert_below(extent_type = \"consecutive\", extent_value = 5, rule_value = 7) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_custom.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a custom alert rule — alert_custom","title":"Create a custom alert rule — alert_custom","text":"TODO: Consider renaming function_call quoted_expression","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_custom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a custom alert rule — alert_custom","text":"","code":"alert_custom(short_name, description, function_call, items = \"[ALL]\")"},{"path":"https://phuongquan.github.io/mantis/reference/alert_custom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a custom alert rule — alert_custom","text":"short_name short name uniquely identify rule. include alphanumeric, '-', '_' characters. description short description rule checks function_call call evaluated per item, returns either `TRUE` `FALSE`. Return value `TRUE` means alert result \"FAIL\". See Details. items vector values item_col rule applied . \"[]\" apply   items. supplied `function_call` passed `eval()` within `dplyr::summarise()` grouping   `item_col` ordering `timepoint_col`. Column names can used explicitly   expression : `value`, `item`, `timepoint`; refer values   `value_col`, `item_col`, `timepoint_col` columns data respectively","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_custom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a custom alert rule — alert_custom","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_custom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a custom alert rule — alert_custom","text":"","code":"ars <- alert_rules(   alert_custom(     short_name = \"my_rule_combo\",     description = \"Over 3 missing values and max value is > 10\",     function_call = quote(sum(is.na(value)) > 3 && max(value, na.rm = TRUE) > 10)   ),   alert_custom(     short_name = \"my_rule_doubled\",     description = \"Last value is over double the first value\",     function_call = quote(rev(value)[1] > 2*value[1])   ) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"Check latest values greater previous period, particular percentage","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"","code":"alert_difference_above_perc(   current_period,   previous_period,   rule_value,   items = \"[ALL]\" )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"current_period vector containing positions end time series use comparison previous_period vector containing positions end time series use comparison. Can overlap `current_period` desired. rule_value value test . e.g. `rule_value=5` means alert percentage increase greater 5 items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"Based mean values two periods.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_above_perc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for when there is a percentage increase in latest values — alert_difference_above_perc","text":"","code":"# alert if mean of last 3 values is over 20% greater than mean of the previous 12 values ars <- alert_rules(   alert_difference_above_perc(current_period = 1:3, previous_period = 4:15, rule_value = 20) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"Check latest values lower previous period, particular percentage","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"","code":"alert_difference_below_perc(   current_period,   previous_period,   rule_value,   items = \"[ALL]\" )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"current_period vector containing positions end time series use comparison previous_period vector containing positions end time series use comparison. Can overlap `current_period` desired. rule_value value test . e.g. `rule_value=5` means alert percentage drop greater 5 items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"Based mean values two periods.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_difference_below_perc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for when there is a percentage drop in latest values — alert_difference_below_perc","text":"","code":"# alert if mean of last 3 values is over 20% lower than mean of the previous 12 values ars <- alert_rules(   alert_difference_below_perc(current_period = 1:3, previous_period = 4:15, rule_value = 20) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_equals.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for specific values — alert_equals","title":"Test for specific values — alert_equals","text":"Configure rule test time series presence specific values. Tolerance can adjusted using `extent_type` `extent_value` parameters, see Examples details.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_equals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for specific values — alert_equals","text":"","code":"alert_equals(   extent_type = \"all\",   extent_value = 1,   rule_value,   items = \"[ALL]\" )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_equals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for specific values — alert_equals","text":"extent_type \"\", \"\", \"last\", \"consecutive\" extent_value lower limit extent. e.g. `extent_type=\"\"` `extent_value=5` means alert 5 values satisfy condition, position rule_value value test . e.g. `rule_value=0` means alert value == 0 items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_equals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for specific values — alert_equals","text":"`alert_rule` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_equals.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for specific values — alert_equals","text":"","code":"# alert if all values are zero ars <- alert_rules(alert_equals(extent_type = \"all\", rule_value = 0))  # alert if there are 10 or more zero values in total # or if the last 3 or more values are zero # or if 5 or more values in a row are zero ars <- alert_rules(   alert_equals(extent_type = \"any\", extent_value = 10, rule_value = 0),   alert_equals(extent_type = \"last\", extent_value = 3, rule_value = 0),   alert_equals(extent_type = \"consecutive\", extent_value = 5, rule_value = 0) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for missing values — alert_missing","title":"Test for missing values — alert_missing","text":"Configure rule test time series presence NA values. Tolerance can adjusted using `extent_type` `extent_value` parameters, see Examples details.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for missing values — alert_missing","text":"","code":"alert_missing(extent_type = \"all\", extent_value = 1, items = \"[ALL]\")"},{"path":"https://phuongquan.github.io/mantis/reference/alert_missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for missing values — alert_missing","text":"extent_type \"\", \"\", \"last\", \"consecutive\" extent_value lower limit extent. e.g. `extent_type=\"\"` `extent_value=5` means alert 5 missing values position items vector values item_col rule applied . \"[]\" apply items.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for missing values — alert_missing","text":"`alert_rule` object","code":""},{"path":[]},{"path":"https://phuongquan.github.io/mantis/reference/alert_missing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for missing values — alert_missing","text":"","code":"# alert if all values are NA ars <- alert_rules(alert_missing(extent_type = \"all\"))  # alert if there are 10 or more missing values in total # or if the last 3 or more values are missing # or if 5 or more values in a row are missing ars <- alert_rules(   alert_missing(extent_type = \"any\", extent_value = 10),   alert_missing(extent_type = \"last\", extent_value = 3),   alert_missing(extent_type = \"consecutive\", extent_value = 5) )"},{"path":"https://phuongquan.github.io/mantis/reference/alert_rules.html","id":null,"dir":"Reference","previous_headings":"","what":"Create set of alert rules — alert_rules","title":"Create set of alert rules — alert_rules","text":"Create set alert rules","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_rules.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create set of alert rules — alert_rules","text":"","code":"alert_rules(...)"},{"path":"https://phuongquan.github.io/mantis/reference/alert_rules.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create set of alert rules — alert_rules","text":"... alerts apply time series","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_rules.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create set of alert rules — alert_rules","text":"`alert_rules` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/alert_rules.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create set of alert rules — alert_rules","text":"","code":"# alert if any values are NA # or if all values are zero ars <- alert_rules(   alert_missing(extent_type = \"any\", extent_value = 1),   alert_equals(extent_type = \"all\", rule_value = 0) )"},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_initialise_widgets.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialise HTML widgets — bespoke_rmd_initialise_widgets","title":"Initialise HTML widgets — bespoke_rmd_initialise_widgets","text":"output constructed 'asis' chunks, must also least one standard chunk contains relevant widgets, otherwise render. dyGraph also needs rendered appropriate plot_type","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_initialise_widgets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialise HTML widgets — bespoke_rmd_initialise_widgets","text":"","code":"bespoke_rmd_initialise_widgets(plot_type)"},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_initialise_widgets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialise HTML widgets — bespoke_rmd_initialise_widgets","text":"plot_type \"`bar`\" \"`line`\", depending used real tables.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_initialise_widgets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialise HTML widgets — bespoke_rmd_initialise_widgets","text":"(mostly) invisible html widget","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","title":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","text":"Chunk options must contain `results = 'asis'`. Function writes directly chunk using side-effects","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","text":"","code":"bespoke_rmd_tab_group(   df,   inputspec,   outputspec,   alert_rules = NULL,   timepoint_limits = c(NA, NA),   fill_with_zero = FALSE,   tab_order = NULL,   tab_group_name = NULL,   tab_group_level = 1 )"},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","text":"df Data frame containing time series long format inputspec [`inputspec()`] object specifying columns supplied `df` represent \"timepoint\", \"item\", \"value\" \"tab\" time series. separate tab created distinct value \"tab\" column. outputspec [`outputspec()`] object specifying desired format html table(s). supplied, default values used. alert_rules [`alert_rules()`] object specifying conditions test timepoint_limits Set start end dates time period include. Defaults min/max timepoint_col fill_with_zero Replace missing NA values 0? Useful value_col record count tab_order Optional vector containing values tab_col desired order display tab_group_name Character string appear parent tab tab_group_level integer specifying nesting level parent tab. Value 1 equates rmd level \"##\".","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","text":"(invisibly) supplied df","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_group.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Dynamically generate a group of tabs for an rmd chunk — bespoke_rmd_tab_group","text":"supplied data frame contain multiple time series long format, .e.: * one \"timepoint\" (datetime) column used x-axes. currently must daily granularity, values consecutive. * one \"item\" (character) column containing categorical values identifying distinct time series. * one \"value\" (numeric) column containing time series values used y-axes. * one \"tab\" (character) column containing categorical values used group time series different tabs report. `inputspec` parameter maps data frame columns .","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_item.html","id":null,"dir":"Reference","previous_headings":"","what":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","title":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","text":"Chunk options must contain `results = 'asis'`. Function writes directly chunk using side-effects","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_item.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","text":"","code":"bespoke_rmd_tab_item(   df,   inputspec,   outputspec,   alert_rules = NULL,   timepoint_limits = c(NA, NA),   fill_with_zero = FALSE,   tab_name = NULL,   tab_level = 1 )"},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_item.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","text":"df data frame containing multiple time series long format. See Details. inputspec [`inputspec()`] object specifying columns supplied `df` represent \"timepoint\", \"item\", \"value\" time series. \"tab\" column specified, ignored. outputspec [`outputspec()`] object specifying desired format html table(s). supplied, default values used. alert_rules [`alert_rules()`] object specifying conditions test timepoint_limits Set start end dates time period include. Defaults min/max timepoint_col fill_with_zero Replace missing NA values 0? Useful value_col record count tab_name Character string appear parent tab tab_level Child level tab. Value 1 creates tab rmd level \"##\".","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_item.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","text":"(invisibly) supplied df","code":""},{"path":"https://phuongquan.github.io/mantis/reference/bespoke_rmd_tab_item.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Dynamically generate a single tab for an rmd chunk — bespoke_rmd_tab_item","text":"supplied data frame contain multiple time series long format, .e.: * one \"timepoint\" (datetime) column used x-axes. currently must daily granularity, values consecutive. * one \"item\" (character) column containing categorical values identifying distinct time series. * one \"value\" (numeric) column containing time series values used y-axes. `inputspec` parameter maps data frame columns .","code":""},{"path":"https://phuongquan.github.io/mantis/reference/example_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data frame containing multiple time series in long format — example_data","title":"Example data frame containing multiple time series in long format — example_data","text":"Simulated data cover range different behaviours time series","code":""},{"path":"https://phuongquan.github.io/mantis/reference/example_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data frame containing multiple time series in long format — example_data","text":"","code":"example_data"},{"path":"https://phuongquan.github.io/mantis/reference/example_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example data frame containing multiple time series in long format — example_data","text":"## `example_data` data frame 3,903 rows 4 columns: timepoint Dates time series item Labels identify different time series value Values time series tab Labels group related time series tabs","code":""},{"path":"https://phuongquan.github.io/mantis/reference/example_prescription_numbers.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data frame containing numbers of antibiotic prescriptions in long format — example_prescription_numbers","title":"Example data frame containing numbers of antibiotic prescriptions in long format — example_prescription_numbers","text":"Simulated data demonstrate package usage","code":""},{"path":"https://phuongquan.github.io/mantis/reference/example_prescription_numbers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data frame containing numbers of antibiotic prescriptions in long format — example_prescription_numbers","text":"","code":"example_prescription_numbers"},{"path":"https://phuongquan.github.io/mantis/reference/example_prescription_numbers.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example data frame containing numbers of antibiotic prescriptions in long format — example_prescription_numbers","text":"## `example_prescription_numbers` data frame 6,570 rows 4 columns: PrescriptionDate Date prescriptions given Antibiotic type antibiotic prescribed NumberOfPrescriptions Number prescriptions given Location Location patient","code":""},{"path":"https://phuongquan.github.io/mantis/reference/inputspec.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify relevant columns in the source data frame — inputspec","title":"Specify relevant columns in the source data frame — inputspec","text":"Specify relevant columns source data frame","code":""},{"path":"https://phuongquan.github.io/mantis/reference/inputspec.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify relevant columns in the source data frame — inputspec","text":"","code":"inputspec(timepoint_col, item_col, value_col, tab_col = NULL, period = \"day\")"},{"path":"https://phuongquan.github.io/mantis/reference/inputspec.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify relevant columns in the source data frame — inputspec","text":"timepoint_col String denoting (datetime) column used x-axes. item_col String denoting (character) column containing categorical values identifying distinct time series. value_col String denoting (numeric) column containing time series values used y-axes. tab_col Optional. String denoting (character) column containing categorical values used group time series different tabs report. period periodicity timepoint_col values. \"day\"/\"month\"/\"year\"","code":""},{"path":"https://phuongquan.github.io/mantis/reference/inputspec.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify relevant columns in the source data frame — inputspec","text":"`inputspec()` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_alerts.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a data frame containing alert results — mantis_alerts","title":"Generate a data frame containing alert results — mantis_alerts","text":"Generate data frame containing alert results","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_alerts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a data frame containing alert results — mantis_alerts","text":"","code":"mantis_alerts(   df,   inputspec,   alert_rules,   filter_results = c(\"PASS\", \"FAIL\", \"NA\"),   timepoint_limits = c(NA, NA),   fill_with_zero = FALSE )"},{"path":"https://phuongquan.github.io/mantis/reference/mantis_alerts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a data frame containing alert results — mantis_alerts","text":"df data frame containing multiple time series long format. See Details. inputspec [`inputspec()`] object specifying columns supplied `df` represent \"timepoint\", \"item\", \"value\"  (optionally) \"tab\" time series. \"item-tab\" represents individual time series alert_rules [`alert_rules()`] object specifying conditions test filter_results return rows alert result vector values timepoint_limits Set start end dates time period include. Defaults min/max timepoint_col. Can either Date values NAs. fill_with_zero Replace missing NA values 0? Useful value_col record count","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_alerts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a data frame containing alert results — mantis_alerts","text":"tibble","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an interactive time series report from a data frame — mantis_report","title":"Create an interactive time series report from a data frame — mantis_report","text":"Accepts data frame containing multiple time series long format, generates collection interactive time series plots visual inspection, saves report disk.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an interactive time series report from a data frame — mantis_report","text":"","code":"mantis_report(   df,   inputspec,   outputspec = NULL,   alert_rules = NULL,   report_title = \"mantis report\",   dataset_description = \"\",   save_directory = \".\",   save_filename = NULL,   show_progress = TRUE,   ... )"},{"path":"https://phuongquan.github.io/mantis/reference/mantis_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an interactive time series report from a data frame — mantis_report","text":"df data frame containing multiple time series long format. See Details. inputspec [`inputspec()`] object specifying columns supplied `df` represent \"timepoint\", \"item\", \"value\"  (optionally) \"tab\" time series. \"tab\" column specified, separate tab created distinct value column. outputspec [`outputspec()`] object specifying desired format html table(s). supplied, default values used. alert_rules [`alert_rules()`] object specifying conditions test report_title Title appear report. dataset_description Short description dataset shown. appear report. save_directory String specifying directory save report. Default current directory. save_filename String specifying filename report, excluding file extension. filename supplied, one automatically generated format `mantis_report_YYMMDD_HHMMSS`. show_progress Print progress console. Default = `TRUE`. ... parameters passed `rmarkdown::render()`. include `input`, `output_dir`, `output_file`, `params`, `quiet`.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an interactive time series report from a data frame — mantis_report","text":"string containing name path saved report.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/mantis_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create an interactive time series report from a data frame — mantis_report","text":"supplied data frame contain multiple time series long format, .e.: * one \"timepoint\" (datetime) column used x-axes. currently must daily granularity, values consecutive. * one \"item\" (character) column containing categorical values identifying distinct time series. * one \"value\" (numeric) column containing time series values used y-axes. * Optionally, \"tab\" (character) column containing categorical values used group time series different tabs report. `inputspec` parameter maps data frame columns .","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_interactive.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify output options for the report — outputspec_interactive","title":"Specify output options for the report — outputspec_interactive","text":"Specify output options report","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_interactive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify output options for the report — outputspec_interactive","text":"","code":"outputspec_interactive(   plot_value_type = \"value\",   plot_type = \"bar\",   item_label = \"Item\",   plot_label = \"History\",   summary_cols = c(\"max_value\"),   sync_axis_range = FALSE,   item_order = NULL,   sort_by = NULL )"},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_interactive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify output options for the report — outputspec_interactive","text":"plot_value_type Display raw \"`value`\" time series display calculated \"`delta`\" consecutive values. plot_type Display time series \"`bar`\" \"`line`\" chart. item_label String label use \"item\" column report. plot_label String label use time series column report. summary_cols Summary data include columns report. Options `c(\"max_value\", \"last_value\", \"last_value_nonmissing\", \"last_timepoint\", \"mean_value\")`. sync_axis_range Set y-axis range time series table. X-axes always synced. item_order vector values contained item_col, explicitly ordering items table. values mentioned included alphabetically end. TRUE, items sorted ascending order. NULL, original order given unique(item_col) used. sort_by column output table sort . Can one `item`, `alert_overall`, one summary columns. Append minus sign sort descending order e.g. `-max_value`. Secondary ordering based `item_order`.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_interactive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify output options for the report — outputspec_interactive","text":"`outputspec()` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_heatmap.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify output options for a static report containing heatmaps — outputspec_static_heatmap","title":"Specify output options for a static report containing heatmaps — outputspec_static_heatmap","text":"Specify output options static report containing heatmaps","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_heatmap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify output options for a static report containing heatmaps — outputspec_static_heatmap","text":"","code":"outputspec_static_heatmap(   fill_colour = \"blue\",   y_label = NULL,   item_order = NULL )"},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_heatmap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify output options for a static report containing heatmaps — outputspec_static_heatmap","text":"fill_colour colour use tiles y_label string y-axis label. Optional item_order vector values contained item_col, explicitly ordering items table. values mentioned included alphabetically end. TRUE, items sorted ascending order. NULL, original order given unique(item_col) used.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_heatmap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify output options for a static report containing heatmaps — outputspec_static_heatmap","text":"`outputspec()` object","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_multipanel.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify output options for a static report containing grids of plots. — outputspec_static_multipanel","title":"Specify output options for a static report containing grids of plots. — outputspec_static_multipanel","text":"Currently creates scatter plots","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_multipanel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify output options for a static report containing grids of plots. — outputspec_static_multipanel","text":"","code":"outputspec_static_multipanel(   sync_axis_range = FALSE,   y_label = NULL,   item_order = NULL )"},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_multipanel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify output options for a static report containing grids of plots. — outputspec_static_multipanel","text":"sync_axis_range Set y-axis range plots. X-axes always synced. y_label string y-axis label. Optional item_order vector values contained item_col, explicitly ordering items table. values mentioned included alphabetically end. TRUE, items sorted ascending order. NULL, original order given unique(item_col) used.","code":""},{"path":"https://phuongquan.github.io/mantis/reference/outputspec_static_multipanel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify output options for a static report containing grids of plots. — outputspec_static_multipanel","text":"`outputspec()` object","code":""}]
